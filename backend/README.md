## Backend API –ø–æ—Ä—Ç–∞–ª–∞ –ï–¶–û–§

Backend API –¥–ª—è –ø–æ—Ä—Ç–∞–ª–∞ –ï–¶–û–§, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ **Node.js + Express + TypeScript**.

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Node.js** + **Express** ‚Äî –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ REST API
- **TypeScript** ‚Äî —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **PostgreSQL** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—á–µ—Ä–µ–∑ `pg`)
- **JWT** ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Zod** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Express
‚îÇ   ‚îú‚îÄ‚îÄ routes/               # –ú–∞—Ä—à—Ä—É—Ç—ã API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ documents.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ packages.ts
‚îÇ   ‚îú‚îÄ‚îÄ controllers/         # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ documents.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ packages.ts
‚îÇ   ‚îú‚îÄ‚îÄ middleware/          # Middleware (error handling, auth)
‚îÇ   ‚îî‚îÄ‚îÄ db/                  # –†–∞–±–æ—Ç–∞ —Å –ë–î (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ)
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îî‚îÄ‚îÄ .env.example
```

### API Endpoints

#### –î–æ–∫—É–º–µ–Ω—Ç—ã
- `GET /api/documents` ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `GET /api/documents/:id` ‚Äî –¥–µ—Ç–∞–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `POST /api/documents` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `PUT /api/documents/:id` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏)
- `POST /api/documents/:id/freeze` ‚Äî –∑–∞–º–æ—Ä–æ–∑–∫–∞ –≤–µ—Ä—Å–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞

#### –ü–∞–∫–µ—Ç—ã
- `GET /api/packages` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤
- `GET /api/packages/:id` ‚Äî –¥–µ—Ç–∞–ª–∏ –ø–∞–∫–µ—Ç–∞
- `POST /api/packages` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env` (—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ `.env.example`):
```bash
cp .env.example .env
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç—å dev-—Å–µ—Ä–≤–µ—Ä:
```bash
npm run dev
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:3000`

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –ö–∞—Ä–∫–∞—Å Express API —Å TypeScript
- –°—Ö–µ–º–∞ –ë–î PostgreSQL (–º–∏–≥—Ä–∞—Ü–∏–∏ –≤ `db/migrations/`)
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –∏ –ø–∞–∫–µ—Ç–∞–º–∏
- REST API endpoints –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –ø–∞–∫–µ—Ç–æ–≤
- –ë–∞–∑–æ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (JWT)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –£–• (—Ç–∏–ø—ã, —Å–µ—Ä–≤–∏—Å-–∑–∞–≥–ª—É—à–∫–∞)

üìã **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –∫ —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —á–µ—Ä–µ–∑ Zod –¥–ª—è –≤—Å–µ—Ö endpoints
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤ (multer + —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ –£–• (–≤–º–µ—Å—Ç–æ –∑–∞–≥–ª—É—à–µ–∫)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ—á–µ—Ä–µ–¥—å –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –£–•
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –ù–°–ò –∏–∑ –£–•
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
psql -U postgres -d ecof_portal -f db/migrations/001_create_schema.sql
psql -U postgres -d ecof_portal -f db/migrations/002_insert_initial_data.sql
```
